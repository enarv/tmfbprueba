<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>
			Login
		</title>
		<link rel="stylesheet" href="https://www.markuptag.com/bootstrap/5/css/bootstrap.min.css">
		<script src="https://unpkg.com/vue@3"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	</head>
	<body>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
		<div id="contenedor">

			<section class="vh-100" style="background-color: #2650db;">
				<div class="container py-5 h-100">
				  <div class="row d-flex justify-content-center align-items-center h-100">
					<div class="col-12 col-md-8 col-lg-6 col-xl-5">
					  <div class="card shadow-2-strong" style="border-radius: 1rem;">
						<div class="card-body p-5 text-center">

							  <h2 class="fw-bold mb-5">Login</h2>
				  
							  <div class="form-outline mb-4">
								<input type="email" v-model="email"  placeholder="Username" required id="typeEmailX-2" class="form-control form-control-lg" />
							  </div>
				  
							  <div class="form-outline mb-4">
								<input type="password" v-model = "password"  placeholder="Contraseña" required id="typePasswordX-2" class="form-control form-control-lg" />
							  </div>
							  
							  <hr>
							  <div class="text-center">
								<p>!Recuerda tu nombre de usuario y contraseña!</p>
							  </div>
				  
							  <button class="btn btn-dark btn-lg btn-block" @click="login">Login</button>
						</div>
					  </div>
					</div>
				  </div>
				</div>
			  </section>

		</div>

		<script type="text/javascript">
			const { createApp } = Vue

			const app = createApp({
				data(){
					return{
						form:{
							users:null,
							email:'',
							password:''
						},
						mostrar: true
					}
				},
				methods:{
					login(e){

						var tmp_mail = this.email
						var tmp_pwd = this.password
						
						//	var axios = require('axios');
						var data = JSON.stringify({
						  "username": tmp_mail, //juanitoleon
						  "password": tmp_pwd, //finhuH7xTAFF8z
						  "request_token": ""
						});

						var config = {
						  method: 'post',
						  url: 'https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=af74a3fa129f538a11a2385781f13edc',
						  headers: { 
						    'Content-Type': 'application/json'
						  },
						  data : data
						};

						axios(config)
						.then(function (response) {
						   
						   if (response.data.success) {
						   		alert("Accesos correctos")
						   		window.location.href = 'home.html'
						   }else{
						   	alert('Datos incorrectos')
						   }

						})
						.catch(function (error) {
						  console.log(error);
						  alert('Datos incorrectos')
						});


						// var access = this.users.map(function(u){

						// 	if (tmp_mail === u.email) {
						// 		if (tmp_pwd === u.password) {
									
						// 			var tmp_usr = { 
						// 				name: u.name,
						// 				username: u.username,
						// 				email: u.email
						// 			}  

						// 			localStorage.setItem('user', JSON.stringify(tmp_usr));

						// 			alert("Accesos correctos")

						// 			window.location.href = 'users.html'
									
						// 		}
						// 	}
						// }) 

						// alert('Datos incorrectos')

						 e.preventDefault()
					}
				},
				mounted(){
					// fetch('data/users.json')
					// .then((res) => res.json())
					// .then((json) => ( this.users = json ))
					// .catch((err) => ( alert('no data') ))
				}
			}).mount('#contenedor')

		</script>
	</body>
</html>












